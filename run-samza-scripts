docker run --rm --name hello-samza --net host -it -p 8088:8088 -v ~/Git/GitHub/anaerobic/samza-hello-samza:/hello-race anaerobic/hello-samza bash

bin/grid start yarn

mvn clean package

mkdir -p deploy/samza

tar -xvf ./target/hello-race-0.9.0-dist.tar.gz -C deploy/samza


docker run -it --rm --net host --name consume-reads anaerobic/fsharp-kafka-consumer reads http://kafka.lacolhost.com:9092

docker run -it --rm --net host --name consume-bib-aggregates anaerobic/fsharp-kafka-consumer race-bib-aggregates http://kafka.lacolhost.com:9092

docker run -it --rm --net host --name consume-bib-checkpoints anaerobic/fsharp-kafka-consumer race-checkpoint-checks http://kafka.lacolhost.com:9092


deploy/samza/bin/run-job.sh --config-factory=org.apache.samza.config.factories.PropertiesConfigFactory --config-path=file://$PWD/deploy/samza/config/race-bib-aggregator.properties

deploy/samza/bin/run-job.sh --config-factory=org.apache.samza.config.factories.PropertiesConfigFactory --config-path=file://$PWD/deploy/samza/config/race-checkpoint-checker.properties


docker run --rm -i anaerobic/generate-race 5000 3 | docker run -i --rm --net host anaerobic/fsharp-kafka-producer reads http://kafka.lacolhost.com:9092


deploy/samza/bin/checkpoint-tool.sh \
  --config-path=file://$PWD/deploy/samza/config/race-bib-aggregator.properties \
  --new-offsets=file:///$PWD/deploy/samza/config/race-bib-aggregator-offsets.properties

deploy/samza/bin/kill-yarn-job.sh <appID>
